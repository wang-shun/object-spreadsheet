<head>
  <script src="jquery/jquery-1.11.1.min.js"></script>
  <script src="handsontable/handsontable.full.js"></script>
  <link rel="stylesheet" type="text/css" href="handsontable/handsontable.full.css">
  <script src="jstree/jstree.js"></script>
  <link rel="stylesheet" type="text/css" href="jstree/themes/default/style.min.css">
</head>
<body>
  {{! Hack to reduce the jerking for addStateCell/changeFormula. }}
  <div style="min-height: 2em;">
    {{#if fullTextToShow}}
      <div>Full text: {{fullTextToShow}}</div>
    {{/if}}
    {{#each newColumnArgs}}
      {{> newColumn}}
    {{/each}}
    {{#each addStateCellArgs}}
      {{> addStateCell}}
    {{/each}}
    {{#each changeFormulaArgs}}
      {{> changeFormula}}
    {{/each}}
  </div>
  <div id="View"></div>
  <div id="newColumnDialog" title="New column">
  </div>
</body>

<template name="newColumn">
  <form class="rsDialog">
    <h2>New column</h2>
    <div>
      <input id="newColumn-kind-state" type="radio" name="kind" value="state"/>
      <label for="newColumn-kind-state">State column</label>
      <input id="newColumn-kind-formula" type="radio" name="kind" value="formula" checked="checked"/>
      <label for="newColumn-kind-formula">Formula column</label>
    </div>
    {{#if newColumnIsState}}
      <div>
        <label for="newColumn-datatype">Data type (primitive or dot-separated names):</label>
        <input id="newColumn-datatype" type="text" name="datatype"/></div>
    {{/if}}
    <div>
      <input type="button" class="submit" value="Create"/>
      <input type="button" class="cancel" value="Cancel"/>
    </div>
  </form>
</template>

<template name="addStateCell">
  <div>
    <label for="addStateCell-value">Add value (JSON):</label>
    <input id="addStateCell-value" type="text" name="value" size="40"/>
    <input type="button" class="submit" value="Add"/>
  </div>
</template>

<template name="changeFormula">
  <div>
    <label for="changeFormula-formula">Formula (see src/server/formulas.coffee):</label>
    <input id="changeFormula-formula" type="text" name="formula"
           size="40" class="formula {{formulaClass}}"/>
    <input type="button" class="submit" value="Save"/>
    <input type="button" class="cancel" value="Revert"/>
  </div>
</template>
